TODO

1. Перезалить картинки!

--------------------------------------------

ВСТУПЛЕНИЕ

Привет!

Я хотела бы рассказать вам о том, как можно использовать некоторые возможности фотошопа прямо в браузере.

Развитие цифровой обработки изображений началось ещё в 60-х, но тогда компьютеры были очень дорогими и медленными, и манипуляции с изображениями были доступны далеко не всем. Со временем компьютеры дешевели, и технологии распространялись всё шире и шире - и вот уже цифровая обработка картинок используется во многих областях - в научных (медицинских и космических) исследованиях, производстве фильмов и видеороликов. Это делает даже ваш телефон, когда вы накладываете фильтры в инстаграме : )
Теперь любая домохозяйка может открыть графический редактор и обработать фотки из отпуска, например - сделать небо синее, а талию - уже.

С недавнего времени широкие возможности обработки изображений начали просачиваться в web. Например, сейчас уже доступны CSS-фильтры и фильтры из SVG, хотя и первые, и вторые пока что не поддерживаются полностью.

* webkit-filters:
* http://codepen.io/yoksel/full/bzdfa/
* http://caniuse.com/#feat=css-filters

* svg fallbacks?

Но этим летом из фотошопа в web попала ещё одна замечательная штука: режимы наложения.

Думаю, что все вы знаете, что в фотошопе можно взять два слоя, наложить один на другой и настройками задать как они будут взаимодействовать между собой: просто просвечивать или смешиваться цветами.

Те, кто работали с режимами наложения, знают, что с ними можно делать много интересного. Так вот: теперь вы можете делать это прямо в браузере!

Значительное отличие режимов в браузере - возможность интерактивного взаимодействия. Вы можете менять режимы на лету и делать анимированные эффекты.

* Я расскажу как работают режимы смешивания в CSS и как они выглядят в коде, расскажу про поддержку браузерами и немного про варианты использования.

В CSS режимы смешивания представлены в двух вариантах: background-blend-mode и mix-blend-mode.

---( слайд )

background-blend-mode - это смешивание слоев фона, mix-blend-mode - управление наложением элементов на странице.

Вот список возможных значений, их немного меньше чем в фотошопе:

---( слайд )

normal
multiply
screen
overlay
darken
lighten
color-dodge
color-burn
hard-light
soft-light
difference
exclusion
hue
saturation
color
luminosity

Так как background-blend-mode лучше поддерживается браузерами, я выбрала его для демонстрации режимов смешивания.
Напомню, что с помощью background-blend-mode мы управляем наложением слоев фона.

Посмотрим в действии: вот есть картинка с котиками, под ней цветной фон.
Поменяем режимы смешивания и посмотрим что получается:

---( демо с котиком и выбором режимов наложения )

Всё как в фотошопе, только прямо в браузере : )

Причем мы не ограничены двумя слоямии фона их содержимым.

Слоев может быть больше двух, и они могут содержать, не только картинки, но и градиенты.

Использование режимов смешивания для градиентов открывает новые возможности создания паттернов, потому что слои с и без того сложными узорами теперь могут взаимодействовать между собой новыми интересными способами.

И из простых паттернов с помощью режимов смешивания можно получить более сложные.

---(несколько демо с градиентами, вкл./выкл режимы смешивания)

Мы только что просмотрели кусочек передачи "Здравствуй, будущее". Режимы смешивания ещё не очень хорошо поддерживаются браузерами, поэтому для использования в реальной жизни пока что больше подойдут обычные картинки.

Давайте посмотрим как выглядят примеры без режимов наложения - так же они будут выглядеть и в браузерах без поддержки. Гардиенты с наложением выглядят эффектно, но картинки пока что надежнее.

Перейдем к более практическим вопросам: как можно использовать режимы наложения?

ПРИМЕНЕНИЕ
--------------------------------------------

---( демо с цветными картинками по наведению - эффект для фотогалереи )

Предположим, у вас есть галерея картинок, и вы хотите, чтобы по умолчанию картинки были черно-белыми, а по наведению становились цветными.

Можно делать каждой фотке черно-белую пару, и показывать их по очереди, а можно обойтись без дублирования, используя всего одну строчку в CSS.

(показываем)

При таком способе мы вместо двух наборов картинок грузим один, и страница загружается быстрее.

Пользователи браузеров без режимов наложения может и не увидят красивый эффект, но зато получат быструю страницу.

Область применения - фотогалереи, логотипы в подвале сайта. Например, вы хотите показать стек используемых технологий, но логотипы не должны быть цветными, чтобы не отвлекать от текста. Делаем вот такое:

---(например грант нода npm sass)

В браузерах с поддержкой будет чб, без - цветные логотипы, и ничего, вобщем-то, особо не поломается.

Красить в чб можно и с помощью CSS фильтров, но у режимов наложения в данный момент поддержка немного больше. Например, они работают в Firefox, в отличие от фильтров. В Firefox поддержка фильтров обещана с 35-й версии.

---*---

Так же с помощью режимов можно легко добавлять виньетирование на фотографии.

Слой с фоткой, ниже слой с радиальным градиентом.

---(Градиенты для виньеток на фото - цветной фон!!)

Можно предположить, что аналогичный эффект можно получить без режимов смешивания просто наложив полупрозрачный градиент поверх картинки.

Можно, но это не всегда сработает. Давайте посмотрим как выглядит цвет поверх картинки и картинка с режимом наложения поверх цвета:

---(демо с градиентами на картинке)

Справа и слева одинаковые градиенты, только левый это просто полупрозрачный градиент, а справа такой же, но в режиме наложения multiply.

Как мы видим, градиент слева просто наложился поверх как независимый слой, и если сделать его менее прозрачным - картинка по ним не будет просвечиваться.

Градиент справа "сложился", суммировался с цветами картинки, и мы получили измененное изображение.

Виньетирование с режимами наложения сработает лучше, чем простым цветом.

---*---

Ещё можно перекрашивать картинки в цвет сайта.

---(демо с цветными картинками в дизайне + слайдер для цветов)

Теперь, если изменится цветовая схема, вам не нужно будет заново перекрашивать картинки в фотошопе - достаточно будет изменить фоновый цвет!

И если режимы не поддерживаются - цветовая схема не будет сохранена, но больше ничегоне поломается.

---*---

Ещё режимы наложения замечательно умеют вырезать темные и светлые цвета из картинок.

Предположим, у вас есть картинка с фоном, но фон вам не нужен. Первым делом пробуем обрезать поля и сохранить в PNG24:

(слайд с рыцарями с разным весом)

PNG значительно проигрывает по весу. А если вам нужно вырезать фон из гифки? Получатся ужасные зубчатые края, и ничего хорошего.

Посмотрим как с этим справляются режимы наложения. Пробуем вырезать светлые участки с помощью режима darken:

---(слайд с рыцарем на фоне)

Фон пропал, причем вместе с остальными белыми областями, при этом сам рыцарь наложился на цвета фона.

Иногда это может быть полезным эффектом, иногда нет.

Теперь попробуем вырезать темные области, для этого воспользуемся режимом lighten:

---(слайд с огнем на фоне)

Тоже самое: темные области пропали, а оставшиеся светлые наложились на фон - и при этом никаких зубчатых краев!

---(камин)

svg masks can the same

ОБРЕЗАНИЕ КАРТИНОК - вырезание цветов
инвертированная прозрачность

--(камин)

** Подгонка по стилю (статья с рыцарем)



Цветные тени (before + multiply)

Спецэффекты (Свечение, искры, огонь)

Сравнить с вебкит фильтрами???

(ПРЕИМУЩЕСТВА)

лучше поддержка
меньше картинок - меньше вес сайта



--------------------------------------------------------



Как задать режим наложения в CSS?

Начнем с background-blend-mode.

Для наложения слоев обязательное условие, чтобы слоев было больше одного. В нашем случае первым слоем будет цвет (teal).

background: teal url(http://placekitten.com/250/200);

Теперь можно добавить режим наложения, например:

background: teal url(http://placekitten.com/250/200);
background-blend-mode: hard-light;

(пошаговое появление слоев справа от кода (цвет - картинка - режим смешивания))

Как я уже говорила, слоев фона может быть больше двух, и для каждого слоя можно отдельно задавать режим наложения:

---(тлен)

Вот так без особых усилий можно сделать тленограм прямо в браузере.

Что интересно, порядок наложение картинки и цвета тоже играет роль. Эффект наложения цвета на картинку выглядит иначе, чем наложение картинки на цвет

---(демо)

Если вы выберите вариант с цветом поверх картинки, следует помнить, что в браузерах без поддержки режимов наложения будет виден только верхний слой - цвет. Будьте внимательны.

Второе свойство - mix-blend-mode - управляет наложением друг на друга элементов страницы.

Задается вот таким образом:

img { mix-blend-mode: multiply; }
...

Причем можно задать ражим наложения для контейнера с элементами, и он сработает для всех элементов внутри контейнера. Таким образом можно задать режим наложения для всей страницы, например.

Результат работы mix-blend-mode будет выглядеть вот так:

(Море поверх моря)

это скрин, потому что свойство ещё не очень хорошо поддерживается.

*****

Поддержка браузерами:

---(слайд)

Плохие новости: IE не поддерживает никакие режимы смешивания вообще.

Хорошие новости: если режимы смешивания не поддерживаются,  в большинстве случаев на странице ничего не поломается - картинки просто останутся как есть.

Остальные браузеры:

background-blend-mode поддерживается в свежих Chrome, Firefox, Opera (примерно с лета). Поддержка в Safari будет начиная с 8-й версии. То есть уже можно начинать потихоньку использовать для каких-то декторативных штук.

mix-blend-mode - последний Firefo(32), но со странностями, Chrome с 31 под флагом, поддержка в Safari будет в 8-й версии.

---(слайд)

Чтобы поиграться с mix-blend-mode в Хроме, включите флаг chrome://flags/#enable-experimental-web-platform-features

Узнать актуальную поддержку браузерами можно на http://caniuse.com/#search=blend

---(ЗАГЛУШКИ!!)

++ (Сравнить вес (заменителей) картинок с маской, пнг, жпг с режимами наложения)

-------------------------------

Возможно, режимы наложения ещё не вполне принадлежат настоящему, но я уверена, что им найдётся достойное место в будущем : )

...............................................................................................................................
